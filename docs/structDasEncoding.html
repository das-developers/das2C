<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>libdas2: DasEncoding Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="das2logo-32.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">libdas2
   </div>
   <div id="projectbrief">das2 core C utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">DasEncoding Class Reference<div class="ingroups"><a class="el" href="group__streams.html">Streams</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="encoding_8h_source.html">das2/encoding.h</a>&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Reading and writing values on das2 streams. </p>
<p>Values in a Das2 Stream have can be encoded in a variety of ways. Values can be big-endian reals, little-endian floats, ASCII strings, etc. In to it's basic category values can be represented on the stream using a variable number of bytes. It is the job of this class to handle encoding and decoding values from a Das2 Stream.</p>
<p>This class handles syntax not semantics. The type of measurement represented by a value depends on it's <a class="el" href="group__units.html#ga2bc8c1ed367dae6aa95343e31578749b" title="Enumeration of unit types, that correspond to physical unit types. ">das_units</a> Any double value can be output as in any given encoding. The functions for this class are happy to output amplitudes at time strings. It's up to other classes to see that proper encodings are used.</p>
<p>This class contains no pointers to heap objects and thus may be handled as pure stack variables.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="group__units.html#ga2bc8c1ed367dae6aa95343e31578749b" title="Enumeration of unit types, that correspond to physical unit types. ">das_units</a> </dd>
<dd>
<a class="el" href="structPlaneDesc.html" title="Describes a data plane within a packet type. ">PlaneDesc</a> </dd></dl>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:gae0840bfb429cd127101c7e003daa6074"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDasEncoding.html">DasEncoding</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__streams.html#gae0840bfb429cd127101c7e003daa6074">new_DasEncoding</a> (int <a class="el" href="structDasEncoding.html#a3962c31e8fd4554170cd2d96c9571ab6">nCat</a>, int <a class="el" href="structDasEncoding.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a>, const char *<a class="el" href="structDasEncoding.html#a4b2dc42b7667372c334f761118169731">sFmt</a>)</td></tr>
<tr class="memdesc:gae0840bfb429cd127101c7e003daa6074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a new data encoder/decoder.  <a href="group__streams.html#gae0840bfb429cd127101c7e003daa6074">More...</a><br/></td></tr>
<tr class="separator:gae0840bfb429cd127101c7e003daa6074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1b94c1b8565da1be061fc155b2960c7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDasEncoding.html">DasEncoding</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDasEncoding.html#ad1b94c1b8565da1be061fc155b2960c7">new_DasEncoding_str</a> (const char *<a class="el" href="structDasEncoding.html#af2c14904a0c7b556d2731c0ece53af5d">sType</a>)</td></tr>
<tr class="memdesc:ad1b94c1b8565da1be061fc155b2960c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new encoding based on the encoding type string.  <a href="#ad1b94c1b8565da1be061fc155b2960c7">More...</a><br/></td></tr>
<tr class="separator:ad1b94c1b8565da1be061fc155b2960c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fa9c7bc114d185399b5b6e529e0fd51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDasEncoding.html#a0fa9c7bc114d185399b5b6e529e0fd51">DasEnc_setAsciiFormat</a> (<a class="el" href="structDasEncoding.html">DasEncoding</a> *pThis, const char *sValFmt, int nFmtWidth)</td></tr>
<tr class="memdesc:a0fa9c7bc114d185399b5b6e529e0fd51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the output format to be used when converting interal binary values to ASCII strings.  <a href="#a0fa9c7bc114d185399b5b6e529e0fd51">More...</a><br/></td></tr>
<tr class="separator:a0fa9c7bc114d185399b5b6e529e0fd51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40b7c168ce96e0e27a0fc11d469c3ec0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDasEncoding.html#a40b7c168ce96e0e27a0fc11d469c3ec0">DasEnc_setTimeFormat</a> (<a class="el" href="structDasEncoding.html">DasEncoding</a> *pThis, const char *sTimeFmt, int nFmtWidth)</td></tr>
<tr class="memdesc:a40b7c168ce96e0e27a0fc11d469c3ec0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the output format to be used when converting binary time values to to ASCII strings.  <a href="#a40b7c168ce96e0e27a0fc11d469c3ec0">More...</a><br/></td></tr>
<tr class="separator:a40b7c168ce96e0e27a0fc11d469c3ec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81a91a9c862c27a9da93c35caa386b73"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDasEncoding.html#a81a91a9c862c27a9da93c35caa386b73">DasEnc_hash</a> (const <a class="el" href="structDasEncoding.html">DasEncoding</a> *pThis)</td></tr>
<tr class="memdesc:a81a91a9c862c27a9da93c35caa386b73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a hash value suitable for use in switch statements.  <a href="#a81a91a9c862c27a9da93c35caa386b73">More...</a><br/></td></tr>
<tr class="separator:a81a91a9c862c27a9da93c35caa386b73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affa73685cf12427744a0bf28bc138164"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__utilities.html#ga9f7e3a196d85388e6fa0170ab7c39ff7">DasErrCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDasEncoding.html#affa73685cf12427744a0bf28bc138164">DasEnc_toStr</a> (<a class="el" href="structDasEncoding.html">DasEncoding</a> *pThis, char *<a class="el" href="structDasEncoding.html#af2c14904a0c7b556d2731c0ece53af5d">sType</a>, size_t nLen)</td></tr>
<tr class="memdesc:affa73685cf12427744a0bf28bc138164"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a string representation of the data type.  <a href="#affa73685cf12427744a0bf28bc138164">More...</a><br/></td></tr>
<tr class="separator:affa73685cf12427744a0bf28bc138164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74cbf402d6e18ad040fcb991e5b5dede"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__utilities.html#ga9f7e3a196d85388e6fa0170ab7c39ff7">DasErrCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDasEncoding.html#a74cbf402d6e18ad040fcb991e5b5dede">DasEnc_write</a> (<a class="el" href="structDasEncoding.html">DasEncoding</a> *pThis, <a class="el" href="structDasBuf.html">DasBuf</a> *pBuf, double value, <a class="el" href="group__units.html#ga2bc8c1ed367dae6aa95343e31578749b">das_units</a> units)</td></tr>
<tr class="memdesc:a74cbf402d6e18ad040fcb991e5b5dede"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encode and write a value onto a string.  <a href="#a74cbf402d6e18ad040fcb991e5b5dede">More...</a><br/></td></tr>
<tr class="separator:a74cbf402d6e18ad040fcb991e5b5dede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57366fa31c2c8cc4668fe05db14d3c9a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__utilities.html#ga9f7e3a196d85388e6fa0170ab7c39ff7">DasErrCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDasEncoding.html#a57366fa31c2c8cc4668fe05db14d3c9a">DasEnc_read</a> (const <a class="el" href="structDasEncoding.html">DasEncoding</a> *pThis, <a class="el" href="structDasBuf.html">DasBuf</a> *pBuf, <a class="el" href="group__units.html#ga2bc8c1ed367dae6aa95343e31578749b">das_units</a> units, double *pOut)</td></tr>
<tr class="memdesc:a57366fa31c2c8cc4668fe05db14d3c9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read and Decode a value from a string.  <a href="#a57366fa31c2c8cc4668fe05db14d3c9a">More...</a><br/></td></tr>
<tr class="separator:a57366fa31c2c8cc4668fe05db14d3c9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a3962c31e8fd4554170cd2d96c9571ab6"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDasEncoding.html#a3962c31e8fd4554170cd2d96c9571ab6">nCat</a></td></tr>
<tr class="memdesc:a3962c31e8fd4554170cd2d96c9571ab6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The basic encoding category.  <a href="#a3962c31e8fd4554170cd2d96c9571ab6">More...</a><br/></td></tr>
<tr class="separator:a3962c31e8fd4554170cd2d96c9571ab6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbc1b35442c6143931edc0189a3432fb"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDasEncoding.html#abbc1b35442c6143931edc0189a3432fb">nWidth</a></td></tr>
<tr class="memdesc:abbc1b35442c6143931edc0189a3432fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The width in bytes of the encoded values.  <a href="#abbc1b35442c6143931edc0189a3432fb">More...</a><br/></td></tr>
<tr class="separator:abbc1b35442c6143931edc0189a3432fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b2dc42b7667372c334f761118169731"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDasEncoding.html#a4b2dc42b7667372c334f761118169731">sFmt</a> [DASENC_FMT_LEN]</td></tr>
<tr class="memdesc:a4b2dc42b7667372c334f761118169731"><td class="mdescLeft">&#160;</td><td class="mdescRight">The sprintf format string.  <a href="#a4b2dc42b7667372c334f761118169731">More...</a><br/></td></tr>
<tr class="separator:a4b2dc42b7667372c334f761118169731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2c14904a0c7b556d2731c0ece53af5d"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structDasEncoding.html#af2c14904a0c7b556d2731c0ece53af5d">sType</a> [DASENC_TYPE_LEN]</td></tr>
<tr class="memdesc:af2c14904a0c7b556d2731c0ece53af5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type value for this encoding on a Das2 Stream.  <a href="#af2c14904a0c7b556d2731c0ece53af5d">More...</a><br/></td></tr>
<tr class="separator:af2c14904a0c7b556d2731c0ece53af5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad1b94c1b8565da1be061fc155b2960c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDasEncoding.html">DasEncoding</a> * new_DasEncoding_str </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new encoding based on the encoding type string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sType</td><td>the <em>type</em> string from a Das2 Stream plane definition. This should be one of, <b>sun_real8</b>, <b>little_endian_real8</b>, <b>sun_real4</b>, <b>little_endian_real4</b>, <b>ascii</b>XX, or <b>time</b>XX. Here <b>XX</b> is a field width.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new <a class="el" href="structDasEncoding.html" title="Reading and writing values on das2 streams. ">DasEncoding</a> allocated on the heap. </dd></dl>

</div>
</div>
<a class="anchor" id="a0fa9c7bc114d185399b5b6e529e0fd51"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DasEnc_setAsciiFormat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDasEncoding.html">DasEncoding</a> *&#160;</td>
          <td class="paramname"><em>pThis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sValFmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nFmtWidth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the output format to be used when converting interal binary values to ASCII strings. </p>
<p>ASCII values are written to Das2 streams with a single space character between each formatted value. The last value of the the last plane is followed by a new-line character instead of a space character. Using this function will change the value format, but will not alter the separater character or the end-of-line characters. (Sorry, no CSV output formats.)</p>
<p>Use of this function is not required. ASCII values will receive a default format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pThis</td><td>The output plane in question</td></tr>
    <tr><td class="paramname">sValFmt</td><td>a printf style format string. Typical strings for general data values would be: '%9.2e', '%+13.6e'. In general strings such as '%13.3f' should <b>not</b> be used as these aren't guarunteed to have a fix output width and your value strings may be truncated.</td></tr>
    <tr><td class="paramname">nFmtWidth</td><td>the number of output characters indicated by this format. This is just the width of the formatted value, not including any field separators. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a40b7c168ce96e0e27a0fc11d469c3ec0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DasEnc_setTimeFormat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDasEncoding.html">DasEncoding</a> *&#160;</td>
          <td class="paramname"><em>pThis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sTimeFmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nFmtWidth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the output format to be used when converting binary time values to to ASCII strings. </p>
<p>ASCII Time values are always encoded for output using the following C-call:</p>
<div class="fragment"><div class="line">* sprintf(buf, sValFmt, year, month, dayofmonth, hour, min, sec);</div>
<div class="line">* </div>
</div><!-- fragment --><p>The seconds field is double precision. Note that you do <b>not</b> have to convert all the fields in your output. In this case the output time will be a truncated time.</p>
<p>ASCII values are written to Das2 streams with a single space character between each formatted value. The last value of the the last plane is followed by a new-line character instead of a space character. Using this function will change the value format, but will not alter the separater character or the end-of-line characters. Sorry, no CSV output formats.</p>
<p>Use of this function is not required. ASCII Time values will receive a default format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pThis</td><td>The output plane in question</td></tr>
    <tr><td class="paramname">sTimeFmt</td><td>a printf style format string. An example strings would be: '%04d-%02d-%02dT%02d:%02d%02.0fZ' for seconds resolution with the Zulu time character 'Z' appended.</td></tr>
    <tr><td class="paramname">nFmtWidth</td><td>the number of output characters indicated by this format. This is just the width of the formatted value, not including any field separators. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a81a91a9c862c27a9da93c35caa386b73"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int DasEnc_hash </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structDasEncoding.html">DasEncoding</a> *&#160;</td>
          <td class="paramname"><em>pThis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a hash value suitable for use in switch statements. </p>
<p>Combines the <a class="el" href="structDasEncoding.html#abbc1b35442c6143931edc0189a3432fb" title="The width in bytes of the encoded values. ">DasEncoding::nWidth</a> and DasEncoding::nCategory into a single integer that represents the encoding.</p>
<p>Since there are only 4 binary value output encodings the following constants are defined for the binary encoding hash values.</p>
<ul>
<li><b>DAS2DT_BE_REAL_4</b> - Big-Endian 4-byte IEEE-754 reals</li>
<li><b>DAS2DT_LE_REAL_4</b> - Little-Endian 4-byte IEEE-754 reals</li>
<li><b>DAS2DT_BE_REAL_8</b> - Big-Endian 4-byte IEEE-754 reals</li>
<li><b>DAS2DT_LE_REAL_8</b> - Little-Endian 4-byte IEEE-754 reals</li>
</ul>
<p>To help with byte-swapping logic the following are also defined</p>
<ul>
<li><b>DAS2DT_DOUBLE</b> - The 8-byte real hash above that corresponds to either DAS2DT_BE_REAL_8 or DAS2DT_LE_REAL_8 depending on the host endian orber.</li>
<li><b>DAS2DT_FLOAT</b> - The 4-byte real hash above that corresponds to either DAS2DT_BE_REAL_4 or DAS2DT_LE_REAL_4 depending on the the host endian order.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pThis</td><td>the encoding to hash</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The encoding category in the lower byte and the width in the next to lowest byte. </dd></dl>

</div>
</div>
<a class="anchor" id="affa73685cf12427744a0bf28bc138164"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__utilities.html#ga9f7e3a196d85388e6fa0170ab7c39ff7">DasErrCode</a> DasEnc_toStr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDasEncoding.html">DasEncoding</a> *&#160;</td>
          <td class="paramname"><em>pThis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>sType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a string representation of the data type. </p>
<p>This provides a string representation of the data type that is suitable for use as the type parameter of a plane in a Das2 stream packet header. All Das2 Tools use the same string representations for encodings.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pThis</td><td>the Das2 encoding to represent as a string.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sType</td><td>a buffer to receive this encoding's type string, should be at least 20 bytes long. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nLen</td><td>the actual length of the string buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success a positive error code if there is a problem </dd></dl>

</div>
</div>
<a class="anchor" id="a74cbf402d6e18ad040fcb991e5b5dede"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__utilities.html#ga9f7e3a196d85388e6fa0170ab7c39ff7">DasErrCode</a> DasEnc_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structDasEncoding.html">DasEncoding</a> *&#160;</td>
          <td class="paramname"><em>pThis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDasBuf.html">DasBuf</a> *&#160;</td>
          <td class="paramname"><em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__units.html#ga2bc8c1ed367dae6aa95343e31578749b">das_units</a>&#160;</td>
          <td class="paramname"><em>units</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encode and write a value onto a string. </p>
<p>Writes a value onto a stream without any separators. Note that the ASCII types write one fewer bytes than their <a class="el" href="structDasEncoding.html#abbc1b35442c6143931edc0189a3432fb" title="The width in bytes of the encoded values. ">DasEncoding::nWidth</a> parameter would indicate. The last byte is left for the caller to use as a separator of thier choosing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pThis</td><td>the <a class="el" href="structDasEncoding.html" title="Reading and writing values on das2 streams. ">DasEncoding</a> object to handle the translation </td></tr>
    <tr><td class="paramname">pBuf</td><td>a write buffer to receive the encoded bytes </td></tr>
    <tr><td class="paramname">value</td><td>The value to write </td></tr>
    <tr><td class="paramname">units</td><td>All values are held internally by the library as doubles. In the instance that the output type for this encoding is a time string this parameter will be used to determine the epoch and scale for <em>value</em>. Otherwise it is ignored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, a positive error value on an error. </dd></dl>

</div>
</div>
<a class="anchor" id="a57366fa31c2c8cc4668fe05db14d3c9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__utilities.html#ga9f7e3a196d85388e6fa0170ab7c39ff7">DasErrCode</a> DasEnc_read </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structDasEncoding.html">DasEncoding</a> *&#160;</td>
          <td class="paramname"><em>pThis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structDasBuf.html">DasBuf</a> *&#160;</td>
          <td class="paramname"><em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__units.html#ga2bc8c1ed367dae6aa95343e31578749b">das_units</a>&#160;</td>
          <td class="paramname"><em>units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>pOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read and Decode a value from a string. </p>
<p>Reads a value from a stream consuming and ignoring separators.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pThis</td><td>the <a class="el" href="structDasEncoding.html" title="Reading and writing values on das2 streams. ">DasEncoding</a> object to handle the translation</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pBuf</td><td>The buffer to read from. This buffer should have at least <a class="el" href="structDasEncoding.html#abbc1b35442c6143931edc0189a3432fb" title="The width in bytes of the encoded values. ">DasEncoding::nWidth</a> more valid bytes in the buffer from the current read location.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">units</td><td>All values are held internally by the library as doubles. this means that times must be converted to some number of steps from a 0 time. The units value provides this information. It is not consulted for non-time fields.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pOut</td><td>The decoded value. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success or a positive error code if there is a problem. </dd></dl>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a3962c31e8fd4554170cd2d96c9571ab6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int nCat</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The basic encoding category. </p>
<p>This may be one of:</p>
<ul>
<li><b>DAS2DT_BE_REAL</b> Most Significant byte First (big-endian) IEEE-754 reals</li>
<li><b>DAS2DT_LE_REAL</b> Most Significant byte First (little-endian) IEEE-754 reals</li>
<li><b>DAS2DT_ASCII</b> A real number formatted in some number of significant digits</li>
<li><b>DAS2DT_TIME</b> A date-time formatted as an ASCII ISO-8601 string. Additionally the following is defined for code that just wants to work in the host byte order, which ever it happens to be:</li>
<li><b>DAS2DT_HOST_REAL</b> </li>
</ul>

</div>
</div>
<a class="anchor" id="abbc1b35442c6143931edc0189a3432fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int nWidth</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The width in bytes of the encoded values. </p>
<p>The largest width for an encoding in Das2 is 127 bytes. Not all encoding categories support all widths the REAL types only allow for 4 or 8 bytes widths. </p>

</div>
</div>
<a class="anchor" id="a4b2dc42b7667372c334f761118169731"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char sFmt[DASENC_FMT_LEN]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The sprintf format string. </p>
<p>This is the format converting doubles and times to ASCII strings. Non-ASCII encodings do not make use of this string. In that case it is set by <a class="el" href="group__streams.html#gae0840bfb429cd127101c7e003daa6074" title="Make a new data encoder/decoder. ">new_DasEncoding()</a> and DasEnc_fromString() to NULL </p>

</div>
</div>
<a class="anchor" id="af2c14904a0c7b556d2731c0ece53af5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char sType[DASENC_TYPE_LEN]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The type value for this encoding on a Das2 Stream. </p>
<p>For ASCII types the type value width is assumed to be one larger than the actual number of bytes in the formatted output to allow for a field separator of some type. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>das2/<a class="el" href="encoding_8h_source.html">encoding.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
